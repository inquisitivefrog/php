
sre@cpp:~/laravel-feature-lab$ docker build --no-cache --target laravel-production -t laravel-production -f docker/php/Dockerfile .
[+] Building 180.7s (40/40) FINISHED                                                                                                                                      docker:default
 => [internal] load build definition from Dockerfile                                                                                                                                0.0s
 => => transferring dockerfile: 4.52kB                                                                                                                                              0.0s
 => [internal] load metadata for docker.io/library/composer:2                                                                                                                       0.7s
 => [internal] load metadata for docker.io/library/php:8.3-fpm                                                                                                                      0.6s
 => [internal] load .dockerignore                                                                                                                                                   0.0s
 => => transferring context: 93B                                                                                                                                                    0.0s
 => CACHED FROM docker.io/library/composer:2@sha256:7384cf9fa70b710af02c9f40bec6e44472e07138efa5ab3428a058087c0d2724                                                                0.0s
 => [internal] load build context                                                                                                                                                   0.2s
 => => transferring context: 1.49MB                                                                                                                                                 0.2s
 => [php-base 1/3] FROM docker.io/library/php:8.3-fpm@sha256:3ab31cc298c37a87ed1d67c46e9bb9825528137fd88d9343f0d8036fd151742c                                                       0.0s
 => => resolve docker.io/library/php:8.3-fpm@sha256:3ab31cc298c37a87ed1d67c46e9bb9825528137fd88d9343f0d8036fd151742c                                                                0.0s
 => CACHED [php-base 2/3] WORKDIR /var/www/html                                                                                                                                     0.0s
 => [php-base 3/3] RUN apt-get update     && DEBIAN_FRONTEND=noninteractive apt-get install -y --no-install-recommends         ca-certificates curl git unzip gnupg2         zlib  12.9s
 => [php-extensions 1/6] RUN apt-get update && apt-get install -y --no-install-recommends         libicu-dev libxml2-dev libgmp-dev libssl-dev uuid-dev     && rm -rf /var/lib/ap  10.8s
 => [php-extensions 2/6] RUN docker-php-ext-install -j$(nproc)         pdo_pgsql         bcmath         mbstring         exif         pcntl         zip         intl         gmp   58.3s 
 => [php-extensions 3/6] RUN docker-php-ext-configure gd --with-freetype --with-jpeg     && docker-php-ext-install -j$(nproc) gd                                                    5.1s 
 => [php-extensions 4/6] RUN pecl channel-update pecl.php.net     && pecl install redis apcu     && docker-php-ext-enable redis apcu                                               23.5s 
 => [php-extensions 5/6] RUN if [ "false" = "true" ]; then         pecl install xdebug && docker-php-ext-enable xdebug;     else echo "Skipping Xdebug installation"; fi            0.2s 
 => [php-extensions 6/6] RUN apt-get purge -y --auto-remove g++     && rm -rf /tmp/* /var/tmp/*                                                                                     0.3s 
 => [composer-deps 1/5] COPY --from=composer:2 /usr/bin/composer /usr/bin/composer                                                                                                  0.0s 
 => [laravel-production 1/6] RUN groupadd -g 1000 laravel     && useradd -u 1000 -g 1000 -m -s /bin/bash laravel                                                                    0.2s 
 => [composer-deps 2/5] WORKDIR /var/www/html                                                                                                                                       0.0s 
 => [composer-deps 3/5] COPY src/composer.json src/composer.lock ./                                                                                                                 0.0s 
 => [composer-deps 4/5] RUN composer require         laravel/breeze         laravel/pennant         laravel/cashier         meilisearch/meilisearch-php         --no-interaction   14.5s 
 => [laravel-production 2/6] WORKDIR /var/www/html                                                                                                                                  0.0s 
 => [composer-deps 5/5] RUN composer install --no-dev --prefer-dist --no-interaction --optimize-autoloader --no-scripts                                                             1.1s 
 => [node-deps 1/5] RUN curl -fsSL https://deb.nodesource.com/setup_20.x | bash -     && apt-get install -y nodejs     && node -v && npm -v                                        17.2s 
 => [node-deps 2/5] WORKDIR /var/www/html                                                                                                                                           0.0s 
 => [node-deps 3/5] COPY src/package.json src/package-lock.json ./                                                                                                                  0.0s 
 => [node-deps 4/5] RUN npm install --silent --no-audit                                                                                                                             6.8s 
 => [node-deps 5/5] RUN npm install -g vite@^7.0.7 --silent     && ln -sf $(npm root -g)/vite/bin/vite.js /usr/local/bin/vite                                                      11.0s 
 => [app-build 1/8] WORKDIR /var/www/html                                                                                                                                           0.0s
 => [app-build 2/8] COPY --from=composer-deps /var/www/html/vendor ./vendor                                                                                                         0.9s
 => [app-build 3/8] COPY --from=node-deps /var/www/html/node_modules ./node_modules                                                                                                 0.4s
 => [app-build 4/8] COPY src/ ./                                                                                                                                                    1.2s
 => [app-build 5/8] RUN if [ -f package.json ] && grep -q "build" package.json; then         npm run build --if-present;     else echo "No frontend build needed"; fi               0.6s
 => [app-build 6/8] RUN composer dump-autoload --optimize --classmap-authoritative || true                                                                                          1.0s
 => [app-build 7/8] RUN php artisan package:discover --ansi || true                                                                                                                 0.2s
 => [app-build 8/8] RUN if [ "production" = "production" ]; then         php artisan config:cache && php artisan route:cache && php artisan view:cache || true;     else echo "Ski  0.3s
 => [laravel-production 3/6] COPY --from=app-build /var/www/html /var/www/html                                                                                                      0.6s
 => [laravel-production 4/6] RUN chown -R laravel:laravel /var/www/html     && find /var/www/html -type f -exec chmod 0640 {} ;     && find /var/www/html -type d -exec chmod 075  11.4s
 => [laravel-production 5/6] COPY docker/php/entrypoint.sh /usr/local/bin/entrypoint.sh                                                                                             0.0s
 => [laravel-production 6/6] RUN chmod +x /usr/local/bin/entrypoint.sh                                                                                                              0.1s
 => exporting to image                                                                                                                                                              0.9s
 => => exporting layers                                                                                                                                                             0.9s
 => => writing image sha256:ae816c34e40894124cc3118bb298e23f9a7b80d633277e3516d0520564ed8982                                                                                        0.0s
 => => naming to docker.io/library/laravel-production                                                                                                                               0.0s

